{% extends 'forum/base.html' %}
{% load static %}

{% block styles %}

<link rel="stylesheet" type="text/css" href="{% static 'forum/css/login.css' %}">

{% endblock %}

{% block content %}

<div class="form-box">
    <div class="button-box">
        <div id="btn"></div>
        <button type="button" name="button" class="toggle-btn" onclick="login()">Login</button>
        <button type="button" name="button" class="toggle-btn" onclick="register()">Register</button>
    </div>

    <div class="icons">
        <a href=" "><img src="{% static 'forum/images/logo.png' %}" alt="" ></a>
    </div>

    <form id="login"  class="input-group" method="POST" action="{% url 'login' %}">
        {% csrf_token %}
        <input type="text" id="id_username" name="username" class="input-field" placeholder="Username" required>
        <input type="password" id="id_password" name="password" class="input-field" placeholder="Password" required>
        <br><br>
        <button type="submit"  class="submit-btn" name="button">Login</button>
        {% if login_form.errors %}
            <p class="error_msg">
                Your username and password didn't match. 
                Please try again.
            </p>
        {% endif %}
    </form>

    <form id="register" class="input-group" method="POST" action="{% url 'signup' %}">
        {% csrf_token %}
        {% if form.errors %}
            {% for error in field.errors %}
                <p class="error_msg" >
                    {{ error }}
                </p>
            {% endfor %}
        {% endif %}
        <input type="text" id="id_username" name="username" class="input-field" placeholder="Username" required maxlength="150">
        <input type="text" id="id_name" name="name" class="input-field" placeholder="Name" required maxlength="30">
        <input type="email" id="id_email" name="email" class="input-field" placeholder="Email" required maxlength="254">
        <input type="password" id="id_password1" name="password1" class="input-field" placeholder="Password" required>
        <input type="password" id="id_password2" name="password2" class="input-field" placeholder="Password confirmation" required>
        <br><br>
        <button type="submit"  class="submit-btn" name="button">Register</button>
        {% if register_form.errors %}
            {% for field in register_form %}
                {% for error in field.errors %}
                    <p class="error_msg">
                        {{ error }}
                    </p>
                {% endfor %}
            {% endfor %}
        {% endif %}
    </form>
</div>

{% endblock %}

{% block script %}
<script type="text/javascript">
    const x = document.getElementById("login");
    const y = document.getElementById("register");
    const z = document.getElementById("btn");

    function register() {
        x.style.left="-400px";
        y.style.left="50px";
        z.style.left="110px";
    }
    
    function login() {
        x.style.left="50px";
        y.style.left="450px";
        z.style.left="0px";
    }

    let view = "{{ view }}";
    if (view == "login") {
        login();
    } else {
        register();
    }
</script>
{% endblock %}